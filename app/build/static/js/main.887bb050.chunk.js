(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,a){e.exports=a(466)},464:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(10),o=a.n(i),c=a(61),s=a(39),l=a(210),p="SET_MARKER_DATA",m={isEditMarker:!1,editData:{},markerList:[]},d=Object(s.c)({marker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object(l.a)({},e,t.content);default:return e}}}),u=a(198),k=Object(s.e)(d,Object(s.d)(Object(s.a)(u.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(222);var h=a(34),f=(a(223),a(138)),E=(a(225),a(19)),g=(a(196),a(40)),b=(a(103),a(9)),M=a(55),v=a(56),y=a(62),O=a(57),j=a(63),w=a(33),D=(a(467),a(101)),L=(a(230),a(207)),C=(a(233),a(208)),I=(a(104),a(21)),x=(a(139),a(67)),T=a(78),S=a.n(T),A="/";function N(e){return{type:p,content:e}}function z(){return function(e){return S.a.get(A+"api/v1/markers").then(function(t){e(N({markerList:t.data.data}))}).catch(function(e){console.log(e)})}}function W(e){return function(t){t(N(e))}}var R=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.props.marker.editData.title!==t.address?(!0===a.props.marker.isEditMarker?(a.props.updateMarker(a.props.marker.editData.id,t.address),a.props.updateMarkerData({isEditMarker:!1})):a.props.createMarker(t.address),a.handleOk(),a.props.form.resetFields(),a.props.getMarkerList()):x.a.open({message:"NO CHANGE DETECTED",description:"Please enter a valid location to update ".concat(a.props.marker.editData.title),icon:n.a.createElement(b.a,{type:"info-circle",theme:"twoTone"})}))})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){!0===a.props.marker.isEditMarker?a.props.updateMarkerData({isEditMarker:!1}):a.setState({visible:!1}),a.props.getMarkerList()},a.handleCancel=function(e){e.preventDefault(),a.props.form.resetFields(),!0===a.props.marker.isEditMarker?a.props.updateMarkerData({isEditMarker:!1}):a.setState({visible:!1})},a.state={visible:!1},a}return Object(j.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.form;this.props.marker.editData!==e.marker.editData&&t.setFieldsValue({address:e.marker.editData.title})}},{key:"componentDidMount",value:function(){this.props.getMarkerList()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("span",null,n.a.createElement(I.a,{type:"primary",onClick:this.showModal},n.a.createElement(b.a,{type:"plus-circle"})," Add Location"),n.a.createElement(L.a,{title:!0===this.props.marker.isEditMarker?"Edit ".concat(this.props.marker.editData.title," Location"):"Add a new Location",visible:!0===this.props.marker.isEditMarker||this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,footer:null},n.a.createElement(g.a,{onSubmit:this.handleSubmit,className:"login-form"},n.a.createElement(g.a.Item,{label:!0===this.props.marker.isEditMarker?"Edit your location":"Enter your desired location"},e("address",{rules:[{required:!0,message:"Please enter your desired place name!"}]})(n.a.createElement(C.a,{prefix:n.a.createElement(b.a,{type:"picture",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Address"}))),n.a.createElement("div",{className:"ant-modal-footer"},n.a.createElement(I.a,{type:"default",onClick:this.handleCancel,"ant-click-animating-without-extra-node":"false"},"Cancel"),n.a.createElement(I.a,{htmlType:"submit",type:"primary"},"OK")))))}}]),t}(r.Component),F=g.a.create({name:"add_update_marker"})(R),P={getMarkerList:z,createMarker:function(e){return function(){return S.a.post(A+"api/v1/markers/createNewMarker?title=".concat(e)).then(function(e){x.a.open({message:"".concat(e.data.status),description:"".concat(e.data.marker?"".concat(e.data.marker.title," ").concat(e.data.message):"".concat(e.data.message)),icon:n.a.createElement(b.a,{type:"info-circle",theme:"twoTone"})})}).catch(function(e){console.log(e)})}},updateMarker:function(e,t){return function(){return S.a.put(A+"api/v1/markers/".concat(e,"/updateMarker?title=").concat(t)).then(function(e){x.a.open({message:"".concat(e.data.status),description:"".concat(e.data.marker?"".concat(e.data.marker.title," ").concat(e.data.message):"".concat(e.data.message)),icon:n.a.createElement(b.a,{type:"info-circle",theme:"twoTone"})})}).catch(function(e){console.log(e)})}},updateMarkerData:W},_=Object(c.b)(function(e){return{marker:e.marker}},P)(F),B=a(209),G=a(79),q=function(e){return e.places.map(function(e,t){return n.a.createElement(G.Marker,{key:t,position:{lat:e.lat,lng:e.lng}})})},H=function(e){var t=e.places,a=e.zoom,r=e.center;return n.a.createElement(G.GoogleMap,{defaultZoom:a,defaultCenter:r},n.a.createElement(q,{places:t}))},J=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={places:a.props.places},a}return Object(j.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.places!==e.places&&this.setState({places:e.places}),this.setState({places:Object(B.a)(e.places)})}},{key:"render",value:function(){return n.a.createElement(H,{center:this.props.center,zoom:this.props.zoom,places:this.state.places})}}]),t}(n.a.Component),K=Object(G.withScriptjs)(Object(G.withGoogleMap)(J)),U=D.a.Meta,V={width:"100%",height:"100%"},X={height:"100vh"},Z=[],$=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).editMarkerItem=a.editMarkerItem.bind(Object(w.a)(Object(w.a)(a))),a.deleteMarkerItem=a.deleteMarkerItem.bind(Object(w.a)(Object(w.a)(a))),a.renderMarked=a.renderMarked.bind(Object(w.a)(Object(w.a)(a))),a}return Object(j.a)(t,e),Object(v.a)(t,[{key:"getMarkers",value:function(){this.props.getMarkerList()}},{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.getMarkers.bind(this),1e3),this.props.marker.markerList.map(function(e,t){return Z.push({id:e.id,name:e.title,title:e.title,lat:e.latitude,lng:e.longitude})})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"componentWillReceiveProps",value:function(e){this.props.marker.markerList!==e.marker.markerList&&(Z=[],e.marker.markerList.map(function(e,t){return Z.push({id:e.id,name:e.title,title:e.title,lat:e.latitude,lng:e.longitude})}))}},{key:"editMarkerItem",value:function(e,t){this.props.updateMarkerData({isEditMarker:!0,editData:{id:e,title:t}})}},{key:"deleteMarkerItem",value:function(e){this.props.deleteMarker(e),this.props.getMarkerList(),this.renderMarked()}},{key:"renderMarked",value:function(){var e=this,t={labelCol:{span:10},wrapperCol:{span:14}};return this.props.marker.markerList.length>=1?this.props.marker.markerList.map(function(a,r){return n.a.createElement(E.a,{key:"".concat(r),lg:12,xl:12},n.a.createElement(D.a,{title:a.title,type:"inner",style:{margin:"5px"},actions:[n.a.createElement(b.a,{type:"edit",onClick:function(t){return e.editMarkerItem(a.id,a.title)}}),n.a.createElement(b.a,{type:"delete",onClick:function(t){return e.deleteMarkerItem(a.id)}})]},n.a.createElement(U,{description:n.a.createElement(g.a,Object.assign({labelAlign:"left"},t),n.a.createElement(g.a.Item,{className:"map-marker",label:"Latitude"},n.a.createElement("span",{className:"ant-form-text"},a.latitude)),n.a.createElement(g.a.Item,{className:"map-marker",label:"Longitude"},n.a.createElement("span",{className:"ant-form-text"},a.longitude)))})))}):n.a.createElement("h3",null,"No Locations Added")}},{key:"render",value:function(){return n.a.createElement(h.a,{type:"flex",justify:"space-between"},n.a.createElement(E.a,{xs:24,sm:24,md:15,lg:15,xl:15,style:X},n.a.createElement(K,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBq5bd9aDDbWnOr8hEfyXTeTzHdIO82CL0",loadingElement:n.a.createElement(f.a,{size:"large"}),containerElement:n.a.createElement("div",{style:X}),mapElement:n.a.createElement("div",{style:V}),center:{lat:51.1726158,lng:10.2329033},zoom:6,places:Z})),n.a.createElement(E.a,{xs:24,sm:24,md:9,lg:9,xl:9},n.a.createElement(D.a,{title:n.a.createElement("h2",{style:{margin:0}},"Locations"),extra:n.a.createElement(_,null)},n.a.createElement(h.a,{type:"flex",justify:"space-between"},this.renderMarked()?this.renderMarked():n.a.createElement(f.a,{size:"large"})))))}}]),t}(r.Component),Q={getMarkerList:z,updateMarkerData:W,deleteMarker:function(e){return function(){return S.a.delete(A+"api/v1/markers/".concat(e)).then(function(e){x.a.open({message:"".concat(e.data.status),description:"".concat(e.data.marker.title," ").concat(e.data.message),icon:n.a.createElement(b.a,{type:"info-circle",theme:"twoTone"})})}).catch(function(e){console.log(e)})}}},Y=Object(c.b)(function(e){return{marker:e.marker}},Q)($),ee=(a(464),function(){return n.a.createElement(Y,null)});a(465);o.a.render(n.a.createElement(c.a,{store:k},n.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[213,1,2]]]);
//# sourceMappingURL=main.887bb050.chunk.js.map